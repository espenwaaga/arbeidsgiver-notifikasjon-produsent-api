apiVersion: v1
kind: Pod
metadata:
  name: postgres
  labels:
    name: postgres
spec:
  containers:
  - name: postgres
    image: postgres
    env:
      - name: POSTGRES_USER
        value: postgres
      - name: POSTGRES_PASSWORD
        value: postgres
    volumeMounts:
      - mountPath: /docker-entrypoint-initdb.d/init.sql
        name: init-script
  volumes:
    - name: init-script
      hostPath:
        path: /arbeidsgiver-notifikasjon-produsent-api/local-db-init.sql
        type: File

---
apiVersion: v1
kind: Service
metadata:
  name: postgres
spec:
  selector:
    name: postgres
  ports:
    - protocol: TCP
      port: 5432
      targetPort: 5432

